db = <<-LINES.lines.map(&:strip)
20161109090941
20161109093138
20161109140529
20161109140611
20161109140702
20161110061110
20161110061759
20161110083835
20161110125541
20161114130011
20161114130012
20161114130013
20161117025600
20161120134318
20161121090159
20161124111517
20161126083633
20161126085749
20161126141655
20161126151252
20161126194833
20161128024926
20161128025003
20161129063535
20161130052558
20161130052559
20161206031422
20161207123923
20161208090812
20161208092623
20161208095125
20161208095335
20161209093236
20161213030152
20161216023502
20161216024445
20161221062959
20161222080634
20161226061742
20161226073251
20161226074707
20161227094759
20161228022510
20161228025647
20161228053123
20161228084223
20170103065515
20170103131852
20170104034042
20170104063322
20170104064327
20170105021426
20170105021556
20170105025511
20170105060833
20170112035647
20170117065355
20170117080729
20170118055957
20170204032344
20170204075134
20170204080204
20170207015809
20170207030407
20170207030408
20170207071612
20170209082523
20170209155016
20170210080146
20170211103906
20170211122225
20170211155745
20170214083115
20170214085121
20170215053606
20170215073342
20170216032542
20170216141416
20170217031930
20170221060423
20170227065021
20170227065938
20170227092547
20170228053207
20170228063629
20170301004922
20170302123048
20170310040900
20170313025150
20170313060550
20170314031707
20170314031828
20170314032012
20170316132007
20170316092540
20170317075559
20170317080446
20170318041001
20170320015413
20170320015414
20170322113419
20170322113420
20170322113421
20170322113422
20170322113423
20170322113424
20170322122542
20170323060637
20170324060050
20170405033123
20170405052559
20170330073240
20170330074720
20170330074721
20170330074722
20170330074723
20170330074724
20170330074725
20170330074726
20170330074727
20170330074728
20170330074729
20170330074730
20170330075753
20170330082325
20170331071845
20170405114032
20170409055750
20170410024013
20170410090005
20170410100556
20170410143443
20170411032137
20170411054052
20170412073751
20170412065918
20170413030837
20170413135656
20170413135719
20170413135738
20170413144319
20170413144345
20170413140338
20170417051044
20170417105857
20170329022536
20170329063652
20170329065506
20170401040205
20170418074333
20170418081108
20170418091430
LINES

local = <<-LINES.lines.map(&:strip)
20161109090941
20161109093138
20161109140529
20161109140611
20161109140702
20161110061110
20161110061759
20161110083835
20161110125541
20161114130011
20161114130012
20161114130013
20161117025600
20161120134318
20161121090159
20161124111517
20161126083633
20161126085749
20161126141655
20161126151252
20161126194833
20161128024926
20161128025003
20161129063535
20161130052558
20161130052559
20161206031422
20161207123923
20161208090812
20161208092623
20161208095125
20161208095335
20161209093236
20161213030152
20161216023502
20161216024445
20161221062959
20161222080634
20161226061742
20161226073251
20161226074707
20161227094759
20161228022510
20161228025647
20161228053123
20161228084223
20170103065515
20170103131852
20170104034042
20170104063322
20170104064327
20170105021426
20170105021556
20170105025511
20170105060833
20170112035647
20170117065355
20170117080729
20170118055957
20170204032344
20170204075134
20170204080204
20170207015809
20170207030407
20170207030408
20170207071612
20170209082523
20170209155016
20170210080146
20170211103906
20170211122225
20170211155745
20170214083115
20170214085121
20170215053606
20170215073342
20170216032542
20170216141416
20170217031930
20170221060423
20170227065021
20170227065938
20170227092547
20170228053207
20170228063629
20170301004922
20170302123048
20170310040900
20170313025150
20170313060550
20170314031707
20170314031828
20170314032012
20170316092540
20170316132007
20170317075559
20170317080446
20170318041001
20170320015413
20170320015414
20170322113419
20170322113420
20170322113421
20170322113422
20170322113423
20170322113424
20170322122542
20170323060637
20170324060050
20170329022536
20170329063652
20170329065506
20170330022457
20170330022458
20170330022459
20170330022460
20170330022461
20170330022462
20170330022463
20170330022464
20170330022465
20170330022466
20170330022467
20170330023728
20170330024210
20170330073240
20170330075753
20170331071845
20170401040205
20170405033123
20170405052559
20170405114032
20170409055750
20170410024013
20170410090005
20170410100556
20170410143443
20170411032137
20170411054052
20170412065918
20170412073751
20170413030837
20170413135656
20170413135719
20170413135738
20170413140338
20170413144319
20170413144345
20170417051044
20170417105857
20170418074333
20170418081108
20170418091430
LINES

puts "db has %d lines" % db.size
puts "local has %d lines" % local.size

differ = (db + local - (db & local)).sort



differ.each do |k|
  files = Dir.glob("db/migrate/#{k}_*")
  case files.size
  when 0
    puts "local missing #{k}"
  when 1
    puts "db missing #{files.first}"
  else
    puts "unexpected #{k}"
  end
end
